[buildout]
extends = base.cfg
parts = ${buildout:readline-parts}
readline-parts =
    readline-patch
    readline

[readline-patch]
recipe = z3c.recipe.runscript
url = http://ftp.gnu.org/gnu/readline/readline-5.2-patches
install-script = ${buildout:python-buildout-root}/fetch-readline-patches.py:fetch
update-script = ${readline-patch:install-script}

[readline:default]
recipe = monkeycmmi
url = http://ftp.gnu.org/gnu/readline/readline-5.2.tar.gz
patch = ${readline-patch:prefix}/readline.patch
extra_options =
    --prefix=${opt:location}

[readline:darwin-snowleopard]
<= readline:default
environment =
    CFLAGS=-arch x86_64
