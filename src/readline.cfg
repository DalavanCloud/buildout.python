[buildout]
extends = base.cfg
parts = ${buildout:readline-parts}
readline-parts =
    readline-patch-6.0
    readline

[dependencies]
dummy-readline = ${readline:recipe}

[readline-patch-6.0]
recipe = z3c.recipe.runscript
url = http://ftp.gnu.org/gnu/readline/readline-6.0-patches
install-script = ${buildout:python-buildout-root}/fetch-readline-patches.py:fetch
update-script = ${:install-script}

[readline:default]
recipe = monkeycmmi
url = http://ftp.gnu.org/gnu/readline/readline-6.0.tar.gz
patch = ${readline-patch-6.0:prefix}/readline.patch
extra_options =
    --prefix=${opt:location}

[readline:darwin-snowleopard-64]
<= readline:default
environment =
    CFLAGS=-arch x86_64
